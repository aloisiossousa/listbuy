(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();let s=null,i=[],l="";const m={admin:"123456",usuario:"senha123"};document.addEventListener("DOMContentLoaded",function(){(window.localStorage&&localStorage.getItem("theme"))==="dark"&&document.body.classList.add("dark");let t=window.sessionStorage&&sessionStorage.getItem("currentUser");if(!t){const n=localStorage.getItem("rememberedUser");n&&(sessionStorage.setItem("currentUser",n),t=n)}if(!t){window.location.href="login.html";return}t&&(s=t,C(),g())});function p(e){e.preventDefault();const t=document.getElementById("username").value,n=document.getElementById("password").value;m[t]&&m[t]===n?(s=t,window.sessionStorage&&sessionStorage.setItem("currentUser",t),g()):alert("Usuário ou senha incorretos!")}function w(){s=null,window.sessionStorage&&sessionStorage.removeItem("currentUser"),window.location.href="login.html"}function g(){const e=document.getElementById("loginScreen");e&&(e.style.display="none"),document.getElementById("mainApp").style.display="block",document.getElementById("welcomeUser").textContent=`Bem-vindo, ${s}!`,d()}function v(){document.body.classList.toggle("dark");const e=document.body.classList.contains("dark");window.localStorage&&localStorage.setItem("theme",e?"dark":"light")}function I(e){e.preventDefault();const t=document.getElementById("itemName").value.trim(),n=document.getElementById("itemPrice").value.replace(".","").replace(",","."),o=parseFloat(n),r=parseInt(document.getElementById("itemQuantity").value),a=document.getElementById("itemCategory").value;if(!t||Number.isNaN(o)||!r||!a){alert("Por favor, preencha todos os campos!");return}const c={id:Date.now(),name:t,price:o,quantity:r,category:a,total:o*r};i.push(c),u(),document.getElementById("itemName").value="",document.getElementById("itemPrice").value="",document.getElementById("itemQuantity").value="1",document.getElementById("itemCategory").value="",d()}function h(e){i=i.filter(t=>t.id!==e),u(),d()}function B(e,t){l=t,document.querySelectorAll(".category-btn").forEach(n=>{n.classList.remove("active")}),e&&e.target&&e.target.classList.add("active"),d()}function d(){const e=document.getElementById("shoppingList"),t=l?i.filter(o=>o.category===l):i,n=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});t.length===0?e.innerHTML=`
                    <div class="empty-state">
                        <div style="font-size: 48px; margin-bottom: 10px;">🛒</div>
                        <h3>${l?"Nenhum item nesta categoria":"Sua lista está vazia"}</h3>
                        <p>${l?"Adicione produtos desta categoria para vê-los aqui!":"Adicione alguns produtos para começar suas compras!"}</p>
                    </div>
                `:e.innerHTML=t.map(o=>`
                    <div class="list-item">
                        <div class="item-info">
                            <div class="item-name">${o.name}</div>
                            <div class="item-details">
                                ${o.quantity}x ${n.format(o.price)}
                                <span class="category-badge">${y(o.category)} ${o.category}</span>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span class="item-price">${n.format(o.total)}</span>
                            <button class="btn-remove" onclick="removeItem(${o.id})">🗑️</button>
                        </div>
                    </div>
                `).join(""),L()}function L(){const e=i.reduce((o,r)=>o+r.quantity,0),t=i.reduce((o,r)=>o+r.total,0),n=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});document.getElementById("totalItems").textContent=e,document.getElementById("totalValue").textContent=n.format(t),document.getElementById("grandTotal").textContent=n.format(t),b()}function b(){const e={};i.forEach(n=>{e[n.category]||(e[n.category]=0),e[n.category]+=n.total});const t=Object.entries(e).sort(([,n],[,o])=>o-n).map(([n,o])=>`
                    <div class="summary-item">
                        <span>${y(n)} ${n}:</span>
                        <span>${currency.format(o)}</span>
                    </div>
                `).join("");document.getElementById("categoryBreakdown").innerHTML=t||'<p style="text-align: center; color: #666;">Nenhuma categoria</p>'}function y(e){return{frutas:"🍎",verduras:"🥬",carnes:"🥩",laticínios:"🥛",padaria:"🍞",limpeza:"🧽",higiene:"🧴",bebidas:"🥤",congelados:"🧊",outros:"📦"}[e]||"📦"}function E(e){const t=document.getElementById("addItemContainer"),n=e&&e.currentTarget?e.currentTarget:null;if(!t)return;const o=t.style.display==="none";t.style.display=o?"block":"none",n&&(n.setAttribute("aria-expanded",String(o)),n.textContent=o?"Minimizar ▲":"Expandir ▼")}function f(){return s?`shoppingList:${s}`:"shoppingList:anon"}function S(){i.length===0||!window.confirm("Tem certeza que deseja limpar toda a lista?")||(i=[],u(),d())}function u(){try{localStorage.setItem(f(),JSON.stringify(i))}catch{}}function C(){try{const e=localStorage.getItem(f());i=e?JSON.parse(e):[]}catch{i=[]}}window.login=p;window.logout=w;window.addItem=I;window.removeItem=h;window.filterByCategory=B;window.toggleTheme=v;window.toggleAddForm=E;window.clearList=S;
